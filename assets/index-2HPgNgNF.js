const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Therapy-CqOeBVv3.js","assets/vue-vendor-Cxt2X1mj.js","assets/EMDR-Bk7GGiDV.js","assets/mapbox-gl-CsHXDxne.js","assets/EMDR-DOe4_gMg.css","assets/About-HjDYfDHs.js","assets/Location-DXFTewyw.js","assets/Location-B4GsGDEq.css","assets/ContactForm-CUlC8s0N.js","assets/ContactForm-bPdR8zQJ.css","assets/FallbackComponent-vpkAikkq-BFaOFGei.js"])))=>i.map(i=>d[i]);
import{r as P,o as re,a as oe,d as V,c as q,b as U,n as qe,e as b,F as he,f as se,w as ke,g as M,h as Ye,v as We,i as ze,j as Je,t as Re,k as Ve,l as F,m as Pe,u as J,p as X,q as pe,s as je,x as Ke,y as Ge,z as Xe,A as Qe,B as Ze,C as et,D as tt,E as Be,G as nt,H as rt}from"./vue-vendor-Cxt2X1mj.js";import{g as ot}from"./mapbox-gl-CsHXDxne.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&r(p)}).observe(document,{childList:!0,subtree:!0});function o(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(s){if(s.ep)return;s.ep=!0;const u=o(s);fetch(s.href,u)}})();const st="modulepreload",it=function(e){return"/ash/"+e},_e={},Q=function(t,o,r){let s=Promise.resolve();if(o&&o.length>0){let g=function(f){return Promise.all(f.map(d=>Promise.resolve(d).then(n=>({status:"fulfilled",value:n}),n=>({status:"rejected",reason:n}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),h=p?.nonce||p?.getAttribute("nonce");s=g(o.map(f=>{if(f=it(f),f in _e)return;_e[f]=!0;const d=f.endsWith(".css"),n=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${n}`))return;const i=document.createElement("link");if(i.rel=d?"stylesheet":st,d||(i.as="script"),i.crossOrigin="",i.href=f,h&&i.setAttribute("nonce",h),document.head.appendChild(i),d)return new Promise((a,c)=>{i.addEventListener("load",a),i.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${f}`)))})}))}function u(p){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=p,window.dispatchEvent(h),!h.defaultPrevented)throw p}return s.then(p=>{for(const h of p||[])h.status==="rejected"&&u(h.reason);return t().catch(u)})},at=.08,lt=.08,ct=.01;function ut(e,t){const o=P(0);let r=0,s=0,u=0,p=0,h=!1,g=null,f=null,d=null;const n=()=>{const{innerHeight:w,innerWidth:x}=window,S=r/s,I=x/w;return S>I?w:x/S},i=()=>{if(!e.value)return;const w=window.innerHeight,x=o.value||0;e.value.style.height=`${w+x}px`},a=()=>{if(r===0||s===0)return;const w=window.innerHeight,x=n();o.value=Math.max(0,x-w),i()},c=()=>{if(!e.value){g=null,h=!1;return}const w=p-u;Math.abs(w)<ct?(u=p,h=!1,g=null):(u+=w*lt,g=requestAnimationFrame(c)),e.value.style.transform=`translate3d(0, ${-u}px, 0)`},l=()=>{!h&&g===null&&(h=!0,g=requestAnimationFrame(c))},v=()=>{const w=window.pageYOffset||window.scrollY;p=Math.min(w*at,o.value),l()},m=()=>{a(),v()},y=()=>{f&&window.removeEventListener("scroll",f),d&&window.removeEventListener("resize",d),g!==null&&(cancelAnimationFrame(g),g=null),h=!1};return re(()=>{const w=new Image;w.src=t,w.onload=()=>{e.value&&(r=w.naturalWidth,s=w.naturalHeight,a(),i(),f=v,d=m,window.addEventListener("scroll",f,{passive:!0}),window.addEventListener("resize",d,{passive:!0}),v())},w.onerror=()=>{console.error("Failed to load background image")}}),oe(y),{maxParallaxOffset:o}}const dt=V({__name:"ParallaxBackground",setup(e){const t="/ash/bg.jpg",o=P(null);return ut(o,t),(r,s)=>(U(),q("div",{ref_key:"backgroundRef",ref:o,class:"background",style:qe({backgroundImage:`url(${t})`})},null,4))}}),G=(e,t)=>{const o=e.__vccOpts||e;for(const[r,s]of t)o[r]=s;return o},ht=G(dt,[["__scopeId","data-v-e14e7418"]]),ft={},pt={class:"hero-section"};function vt(e,t){return U(),q("section",pt,[...t[0]||(t[0]=[b("div",{class:"hero-box"},[b("h1",{class:"hero-name"},"Ash Martin, LCSW"),b("p",{class:"hero-line"},"In-person Therapy & EMDR"),b("p",{class:"hero-line"},"Greenpoint / Williamsburg, NYC")],-1)])])}const mt=G(ft,[["render",vt],["__scopeId","data-v-d27c04ef"]]);function Se(e,t=.1){let o=null,r=null;const s=()=>{if(!e.value){r=null;return}const h=window.pageYOffset||window.scrollY,g=window.innerHeight,f=e.value.getBoundingClientRect(),n=f.top+h+f.height/2,i=h+g/2,c=(n-i)*t;e.value.style.transform=`translate3d(0, ${c}px, 0)`,r=requestAnimationFrame(s)},u=()=>{r===null&&(r=requestAnimationFrame(s))},p=()=>{o&&window.removeEventListener("scroll",o),r!==null&&(cancelAnimationFrame(r),r=null)};re(()=>{o=u,window.addEventListener("scroll",o,{passive:!0}),s()}),oe(p)}const gt={class:"section section-full-height"},yt={class:"boxes-container"},wt=V({__name:"Home",setup(e){const t=P(null),o=P(null);Se(t,.1),Se(o,.15);const r=s=>{const u=document.getElementById(s);if(u){const p=u.querySelector(".text-box");if(p){const d=p.getBoundingClientRect().top+window.scrollY-100;window.scrollTo({top:d,behavior:"smooth"})}else{const f=u.getBoundingClientRect().top+window.scrollY-100;window.scrollTo({top:f,behavior:"smooth"})}}};return(s,u)=>(U(),q(he,null,[u[4]||(u[4]=b("section",{id:"home",class:"section section-full-height"},[b("div",{class:"text-box"},[b("p",null,"Therapy is a space for restoring trust in our instincts."),b("p",null,"From there, we find our way to action, pleasure, creativity, and rest."),b("p",null,"More and more, we allow ourselves to exist, connect with others, and become alive.")])],-1)),b("section",gt,[b("div",yt,[b("div",{ref_key:"leftBoxRef",ref:t,class:"text-box box-left",onClick:u[0]||(u[0]=p=>r("therapy"))},[...u[2]||(u[2]=[b("h3",null,"Therapy",-1),b("p",null,"Whether you're experienced in doing this work or if you're coming to therapy for the first time, together we'll find our way into a conversation. Through conversation, the therapy emerges.",-1),b("div",{class:"arrow-container"},[b("svg",{width:"98",height:"98",viewBox:"0 0 98 98",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"arrow-icon"},[b("path",{d:"M49.0002 20.4167L49.0002 77.5834M49.0002 77.5834L77.5835 49M49.0002 77.5834L20.4168 49",stroke:"#EECDBE","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)])],512),b("div",{ref_key:"rightBoxRef",ref:o,class:"text-box box-right",onClick:u[1]||(u[1]=p=>r("emdr"))},[...u[3]||(u[3]=[b("h3",null,"EMDR & Adjunctive",-1),b("p",null,"EMDR (Eye Movement Desensitization and Reprocessing) therapy targets traumatic stress symptoms. Specifically flashbacks, avoidance of triggers, and intrusive thoughts.",-1),b("p",null,"If you are already in an ongoing therapy and want to add EMDR to your process, I offer adjunctive EMDR.",-1),b("div",{class:"arrow-container"},[b("svg",{width:"98",height:"98",viewBox:"0 0 98 98",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"arrow-icon"},[b("path",{d:"M49.0002 20.4167L49.0002 77.5834M49.0002 77.5834L77.5835 49M49.0002 77.5834L20.4168 49",stroke:"#EECDBE","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)])],512)])])],64))}}),bt=G(wt,[["__scopeId","data-v-0b0ee7b1"]]);var ue={exports:{}};var kt=ue.exports,Ie;function xt(){return Ie||(Ie=1,(function(e,t){(function(o,r){e.exports=r()})(kt,(function(){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},r=function(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")},s=(function(){function f(d,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(d,n,i){return n&&f(d.prototype,n),i&&f(d,i),d}})(),u=Object.assign||function(f){for(var d=1;d<arguments.length;d++){var n=arguments[d];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(f[i]=n[i])}return f},p=(function(){function f(d){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5e3;r(this,f),this.ctx=d,this.iframes=n,this.exclude=i,this.iframesTimeout=a}return s(f,[{key:"getContexts",value:function(){var n=void 0,i=[];return typeof this.ctx>"u"||!this.ctx?n=[]:NodeList.prototype.isPrototypeOf(this.ctx)?n=Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?n=this.ctx:typeof this.ctx=="string"?n=Array.prototype.slice.call(document.querySelectorAll(this.ctx)):n=[this.ctx],n.forEach(function(a){var c=i.filter(function(l){return l.contains(a)}).length>0;i.indexOf(a)===-1&&!c&&i.push(a)}),i}},{key:"getIframeContents",value:function(n,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},c=void 0;try{var l=n.contentWindow;if(c=l.document,!l||!c)throw new Error("iframe inaccessible")}catch{a()}c&&i(c)}},{key:"isIframeBlank",value:function(n){var i="about:blank",a=n.getAttribute("src").trim(),c=n.contentWindow.location.href;return c===i&&a!==i&&a}},{key:"observeIframeLoad",value:function(n,i,a){var c=this,l=!1,v=null,m=function y(){if(!l){l=!0,clearTimeout(v);try{c.isIframeBlank(n)||(n.removeEventListener("load",y),c.getIframeContents(n,i,a))}catch{a()}}};n.addEventListener("load",m),v=setTimeout(m,this.iframesTimeout)}},{key:"onIframeReady",value:function(n,i,a){try{n.contentWindow.document.readyState==="complete"?this.isIframeBlank(n)?this.observeIframeLoad(n,i,a):this.getIframeContents(n,i,a):this.observeIframeLoad(n,i,a)}catch{a()}}},{key:"waitForIframes",value:function(n,i){var a=this,c=0;this.forEachIframe(n,function(){return!0},function(l){c++,a.waitForIframes(l.querySelector("html"),function(){--c||i()})},function(l){l||i()})}},{key:"forEachIframe",value:function(n,i,a){var c=this,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},v=n.querySelectorAll("iframe"),m=v.length,y=0;v=Array.prototype.slice.call(v);var w=function(){--m<=0&&l(y)};m||w(),v.forEach(function(x){f.matches(x,c.exclude)?w():c.onIframeReady(x,function(S){i(x)&&(y++,a(S)),w()},w)})}},{key:"createIterator",value:function(n,i,a){return document.createNodeIterator(n,i,a,!1)}},{key:"createInstanceOnIframe",value:function(n){return new f(n.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(n,i,a){var c=n.compareDocumentPosition(a),l=Node.DOCUMENT_POSITION_PRECEDING;if(c&l)if(i!==null){var v=i.compareDocumentPosition(a),m=Node.DOCUMENT_POSITION_FOLLOWING;if(v&m)return!0}else return!0;return!1}},{key:"getIteratorNode",value:function(n){var i=n.previousNode(),a=void 0;return i===null?a=n.nextNode():a=n.nextNode()&&n.nextNode(),{prevNode:i,node:a}}},{key:"checkIframeFilter",value:function(n,i,a,c){var l=!1,v=!1;return c.forEach(function(m,y){m.val===a&&(l=y,v=m.handled)}),this.compareNodeIframe(n,i,a)?(l===!1&&!v?c.push({val:a,handled:!0}):l!==!1&&!v&&(c[l].handled=!0),!0):(l===!1&&c.push({val:a,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(n,i,a,c){var l=this;n.forEach(function(v){v.handled||l.getIframeContents(v.val,function(m){l.createInstanceOnIframe(m).forEachNode(i,a,c)})})}},{key:"iterateThroughNodes",value:function(n,i,a,c,l){for(var v=this,m=this.createIterator(i,n,c),y=[],w=[],x=void 0,S=void 0,I=function(){var L=v.getIteratorNode(m);return S=L.prevNode,x=L.node,x};I();)this.iframes&&this.forEachIframe(i,function(T){return v.checkIframeFilter(x,S,T,y)},function(T){v.createInstanceOnIframe(T).forEachNode(n,function(L){return w.push(L)},c)}),w.push(x);w.forEach(function(T){a(T)}),this.iframes&&this.handleOpenIframes(y,n,a,c),l()}},{key:"forEachNode",value:function(n,i,a){var c=this,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},v=this.getContexts(),m=v.length;m||l(),v.forEach(function(y){var w=function(){c.iterateThroughNodes(n,y,i,a,function(){--m<=0&&l()})};c.iframes?c.waitForIframes(y,w):w()})}}],[{key:"matches",value:function(n,i){var a=typeof i=="string"?[i]:i,c=n.matches||n.matchesSelector||n.msMatchesSelector||n.mozMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;if(c){var l=!1;return a.every(function(v){return c.call(n,v)?(l=!0,!1):!0}),l}else return!1}}]),f})(),h=(function(){function f(d){r(this,f),this.ctx=d,this.ie=!1;var n=window.navigator.userAgent;(n.indexOf("MSIE")>-1||n.indexOf("Trident")>-1)&&(this.ie=!0)}return s(f,[{key:"log",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"debug",a=this.opt.log;this.opt.debug&&(typeof a>"u"?"undefined":o(a))==="object"&&typeof a[i]=="function"&&a[i]("mark.js: "+n)}},{key:"escapeStr",value:function(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(n){return this.opt.wildcards!=="disabled"&&(n=this.setupWildcardsRegExp(n)),n=this.escapeStr(n),Object.keys(this.opt.synonyms).length&&(n=this.createSynonymsRegExp(n)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(n=this.setupIgnoreJoinersRegExp(n)),this.opt.diacritics&&(n=this.createDiacriticsRegExp(n)),n=this.createMergedBlanksRegExp(n),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(n=this.createJoinersRegExp(n)),this.opt.wildcards!=="disabled"&&(n=this.createWildcardsRegExp(n)),n=this.createAccuracyRegExp(n),n}},{key:"createSynonymsRegExp",value:function(n){var i=this.opt.synonyms,a=this.opt.caseSensitive?"":"i",c=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var l in i)if(i.hasOwnProperty(l)){var v=i[l],m=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(l):this.escapeStr(l),y=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(v):this.escapeStr(v);m!==""&&y!==""&&(n=n.replace(new RegExp("("+this.escapeStr(m)+"|"+this.escapeStr(y)+")","gm"+a),c+("("+this.processSynomyms(m)+"|")+(this.processSynomyms(y)+")")+c))}return n}},{key:"processSynomyms",value:function(n){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(n=this.setupIgnoreJoinersRegExp(n)),n}},{key:"setupWildcardsRegExp",value:function(n){return n=n.replace(/(?:\\)*\?/g,function(i){return i.charAt(0)==="\\"?"?":""}),n.replace(/(?:\\)*\*/g,function(i){return i.charAt(0)==="\\"?"*":""})}},{key:"createWildcardsRegExp",value:function(n){var i=this.opt.wildcards==="withSpaces";return n.replace(/\u0001/g,i?"[\\S\\s]?":"\\S?").replace(/\u0002/g,i?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(n){return n.replace(/[^(|)\\]/g,function(i,a,c){var l=c.charAt(a+1);return/[(|)\\]/.test(l)||l===""?i:i+"\0"})}},{key:"createJoinersRegExp",value:function(n){var i=[],a=this.opt.ignorePunctuation;return Array.isArray(a)&&a.length&&i.push(this.escapeStr(a.join(""))),this.opt.ignoreJoiners&&i.push("\\u00ad\\u200b\\u200c\\u200d"),i.length?n.split(/\u0000+/).join("["+i.join("")+"]*"):n}},{key:"createDiacriticsRegExp",value:function(n){var i=this.opt.caseSensitive?"":"i",a=this.opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"],c=[];return n.split("").forEach(function(l){a.every(function(v){if(v.indexOf(l)!==-1){if(c.indexOf(v)>-1)return!1;n=n.replace(new RegExp("["+v+"]","gm"+i),"["+v+"]"),c.push(v)}return!0})}),n}},{key:"createMergedBlanksRegExp",value:function(n){return n.replace(/[\s]+/gmi,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(n){var i=this,a="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿",c=this.opt.accuracy,l=typeof c=="string"?c:c.value,v=typeof c=="string"?[]:c.limiters,m="";switch(v.forEach(function(y){m+="|"+i.escapeStr(y)}),l){case"partially":default:return"()("+n+")";case"complementary":return m="\\s"+(m||this.escapeStr(a)),"()([^"+m+"]*"+n+"[^"+m+"]*)";case"exactly":return"(^|\\s"+m+")("+n+")(?=$|\\s"+m+")"}}},{key:"getSeparatedKeywords",value:function(n){var i=this,a=[];return n.forEach(function(c){i.opt.separateWordSearch?c.split(" ").forEach(function(l){l.trim()&&a.indexOf(l)===-1&&a.push(l)}):c.trim()&&a.indexOf(c)===-1&&a.push(c)}),{keywords:a.sort(function(c,l){return l.length-c.length}),length:a.length}}},{key:"isNumeric",value:function(n){return Number(parseFloat(n))==n}},{key:"checkRanges",value:function(n){var i=this;if(!Array.isArray(n)||Object.prototype.toString.call(n[0])!=="[object Object]")return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(n),[];var a=[],c=0;return n.sort(function(l,v){return l.start-v.start}).forEach(function(l){var v=i.callNoMatchOnInvalidRanges(l,c),m=v.start,y=v.end,w=v.valid;w&&(l.start=m,l.length=y-m,a.push(l),c=y)}),a}},{key:"callNoMatchOnInvalidRanges",value:function(n,i){var a=void 0,c=void 0,l=!1;return n&&typeof n.start<"u"?(a=parseInt(n.start,10),c=a+parseInt(n.length,10),this.isNumeric(n.start)&&this.isNumeric(n.length)&&c-i>0&&c-a>0?l=!0:(this.log("Ignoring invalid or overlapping range: "+(""+JSON.stringify(n))),this.opt.noMatch(n))):(this.log("Ignoring invalid range: "+JSON.stringify(n)),this.opt.noMatch(n)),{start:a,end:c,valid:l}}},{key:"checkWhitespaceRanges",value:function(n,i,a){var c=void 0,l=!0,v=a.length,m=i-v,y=parseInt(n.start,10)-m;return y=y>v?v:y,c=y+parseInt(n.length,10),c>v&&(c=v,this.log("End range automatically set to the max value of "+v)),y<0||c-y<0||y>v||c>v?(l=!1,this.log("Invalid range: "+JSON.stringify(n)),this.opt.noMatch(n)):a.substring(y,c).replace(/\s+/g,"")===""&&(l=!1,this.log("Skipping whitespace only range: "+JSON.stringify(n)),this.opt.noMatch(n)),{start:y,end:c,valid:l}}},{key:"getTextNodes",value:function(n){var i=this,a="",c=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(l){c.push({start:a.length,end:(a+=l.textContent).length,node:l})},function(l){return i.matchesExclude(l.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){n({value:a,nodes:c})})}},{key:"matchesExclude",value:function(n){return p.matches(n,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(n,i,a){var c=this.opt.element?this.opt.element:"mark",l=n.splitText(i),v=l.splitText(a-i),m=document.createElement(c);return m.setAttribute("data-markjs","true"),this.opt.className&&m.setAttribute("class",this.opt.className),m.textContent=l.textContent,l.parentNode.replaceChild(m,l),v}},{key:"wrapRangeInMappedTextNode",value:function(n,i,a,c,l){var v=this;n.nodes.every(function(m,y){var w=n.nodes[y+1];if(typeof w>"u"||w.start>i){if(!c(m.node))return!1;var x=i-m.start,S=(a>m.end?m.end:a)-m.start,I=n.value.substr(0,m.start),T=n.value.substr(S+m.start);if(m.node=v.wrapRangeInTextNode(m.node,x,S),n.value=I+T,n.nodes.forEach(function(L,D){D>=y&&(n.nodes[D].start>0&&D!==y&&(n.nodes[D].start-=S),n.nodes[D].end-=S)}),a-=S,l(m.node.previousSibling,m.start),a>m.end)i=m.end;else return!1}return!0})}},{key:"wrapMatches",value:function(n,i,a,c,l){var v=this,m=i===0?0:i+1;this.getTextNodes(function(y){y.nodes.forEach(function(w){w=w.node;for(var x=void 0;(x=n.exec(w.textContent))!==null&&x[m]!=="";)if(a(x[m],w)){var S=x.index;if(m!==0)for(var I=1;I<m;I++)S+=x[I].length;w=v.wrapRangeInTextNode(w,S,S+x[m].length),c(w.previousSibling),n.lastIndex=0}}),l()})}},{key:"wrapMatchesAcrossElements",value:function(n,i,a,c,l){var v=this,m=i===0?0:i+1;this.getTextNodes(function(y){for(var w=void 0;(w=n.exec(y.value))!==null&&w[m]!=="";){var x=w.index;if(m!==0)for(var S=1;S<m;S++)x+=w[S].length;var I=x+w[m].length;v.wrapRangeInMappedTextNode(y,x,I,function(T){return a(w[m],T)},function(T,L){n.lastIndex=L,c(T)})}l()})}},{key:"wrapRangeFromIndex",value:function(n,i,a,c){var l=this;this.getTextNodes(function(v){var m=v.value.length;n.forEach(function(y,w){var x=l.checkWhitespaceRanges(y,m,v.value),S=x.start,I=x.end,T=x.valid;T&&l.wrapRangeInMappedTextNode(v,S,I,function(L){return i(L,y,v.value.substring(S,I),w)},function(L){a(L,y)})}),c()})}},{key:"unwrapMatches",value:function(n){for(var i=n.parentNode,a=document.createDocumentFragment();n.firstChild;)a.appendChild(n.removeChild(n.firstChild));i.replaceChild(a,n),this.ie?this.normalizeTextNode(i):i.normalize()}},{key:"normalizeTextNode",value:function(n){if(n){if(n.nodeType===3)for(;n.nextSibling&&n.nextSibling.nodeType===3;)n.nodeValue+=n.nextSibling.nodeValue,n.parentNode.removeChild(n.nextSibling);else this.normalizeTextNode(n.firstChild);this.normalizeTextNode(n.nextSibling)}}},{key:"markRegExp",value:function(n,i){var a=this;this.opt=i,this.log('Searching with expression "'+n+'"');var c=0,l="wrapMatches",v=function(y){c++,a.opt.each(y)};this.opt.acrossElements&&(l="wrapMatchesAcrossElements"),this[l](n,this.opt.ignoreGroups,function(m,y){return a.opt.filter(y,m,c)},v,function(){c===0&&a.opt.noMatch(n),a.opt.done(c)})}},{key:"mark",value:function(n,i){var a=this;this.opt=i;var c=0,l="wrapMatches",v=this.getSeparatedKeywords(typeof n=="string"?[n]:n),m=v.keywords,y=v.length,w=this.opt.caseSensitive?"":"i",x=function S(I){var T=new RegExp(a.createRegExp(I),"gm"+w),L=0;a.log('Searching with expression "'+T+'"'),a[l](T,1,function(D,Y){return a.opt.filter(Y,I,c,L)},function(D){L++,c++,a.opt.each(D)},function(){L===0&&a.opt.noMatch(I),m[y-1]===I?a.opt.done(c):S(m[m.indexOf(I)+1])})};this.opt.acrossElements&&(l="wrapMatchesAcrossElements"),y===0?this.opt.done(c):x(m[0])}},{key:"markRanges",value:function(n,i){var a=this;this.opt=i;var c=0,l=this.checkRanges(n);l&&l.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(l)),this.wrapRangeFromIndex(l,function(v,m,y,w){return a.opt.filter(v,m,y,w)},function(v,m){c++,a.opt.each(v,m)},function(){a.opt.done(c)})):this.opt.done(c)}},{key:"unmark",value:function(n){var i=this;this.opt=n;var a=this.opt.element?this.opt.element:"*";a+="[data-markjs]",this.opt.className&&(a+="."+this.opt.className),this.log('Removal selector "'+a+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(c){i.unwrapMatches(c)},function(c){var l=p.matches(c,a),v=i.matchesExclude(c);return!l||v?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(n){this._opt=u({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},n)},get:function(){return this._opt}},{key:"iterator",get:function(){return new p(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),f})();function g(f){var d=this,n=new h(f);return this.mark=function(i,a){return n.mark(i,a),d},this.markRegExp=function(i,a){return n.markRegExp(i,a),d},this.markRanges=function(i,a){return n.markRanges(i,a),d},this.unmark=function(i){return n.unmark(i),d},this}return g}))})(ue)),ue.exports}var Et=xt();const Rt=ot(Et),z=P(null),de=P(!1),Z=P(!1);function we(e){z.value=e,e?(de.value=!0,Z.value=!0,setTimeout(()=>{de.value=!1,Z.value=!1},3e3)):(de.value=!1,Z.value=!1)}const xe={holding:`<p>I ask you to hold me.<br/>
Please hold me.<br/>
You have no idea what you're holding.</p>

<p>I have no idea what you're holding.<br/>
(When we speak of our dreams<br/>
the beautiful thing is<br/>
neither of us have any idea<br/>
what we're talking about)</p>`},Te=Object.keys(xe),_t={class:"search-buttons-container"},St=["disabled"],It={class:"match-count"},Tt=["disabled"],At=["disabled"],Lt={class:"not-found-text"},Ct={key:0,class:"spinner-wrapper"},$t={key:1},Nt=V({__name:"Search",props:{isVisible:{type:Boolean}},setup(e){const t=P(""),o=P(-1),r=P(0),s=P(!1);let u=null,p=null,h=[];const g=se(()=>{const y=t.value.trim().toLowerCase();return xe[y]?y:null}),f=se(()=>g.value!==null),d=se(()=>g.value!==null&&z.value===g.value),n=se(()=>r.value>0&&!f.value||f.value),i=()=>{if(!p){const y=document.querySelector(".app");if(y)p=new Rt(y);else return}p.unmark({done:()=>{h=[],o.value=-1,r.value=0,t.value.trim()&&p.mark(t.value.trim(),{element:"mark",className:"search-highlight",acrossElements:!0,separateWordSearch:!1,done:y=>{const w=document.querySelector(".app");w&&(h=Array.from(w.querySelectorAll("mark.search-highlight")),r.value=h.length,h.length>0&&!g.value?(o.value=0,c(0)):g.value&&(o.value=-1))}})}})},a=async()=>{if(console.log("handleNotFoundClick called",{matchedKeyword:g.value,isLoading:s.value,searchQuery:t.value}),!g.value){console.warn("No keyword matched, cannot proceed");return}if(s.value){console.log("Already loading keyword, ignoring click");return}const y=g.value;console.log("Activating keyword:",y),s.value=!0,we(y),await Ve(),console.log("DOM updated, waiting for section to become visible...");const w=async()=>{const I=document.getElementById(`keyword-${y}`);if(I){const T=I.getBoundingClientRect(),L=window.getComputedStyle(I);if(T.height>200&&L.opacity==="1"&&L.visibility==="visible")return console.log("Section is visible!",{height:T.height,opacity:L.opacity}),I}return null};let x=0,S=null;for(;!S&&x<50;)await new Promise(I=>setTimeout(I,50)),S=await w(),x++,x%10===0&&console.log(`Waiting for section visibility... attempt ${x}/50`);if(await new Promise(I=>setTimeout(I,100)),S||(console.warn("Section not fully visible after waiting, trying to find it anyway..."),S=document.getElementById(`keyword-${y}`),S&&console.log("Found section, but it may not be fully expanded yet")),S){const I=S.querySelector(".keyword-text-box");if(I){const T=I.getBoundingClientRect(),L=window.innerHeight,D=window.scrollY,Y=T.top+D,ee=T.height,k=Y-L/2+ee/2,E=window.scrollY,R=k-E,_=1200,A=performance.now(),O=C=>{const B=C-A,N=Math.min(B/_,1),K=N<.5?4*N*N*N:1-Math.pow(-2*N+2,3)/2,fe=E+R*K;window.scrollTo(0,fe),N<1?requestAnimationFrame(O):s.value=!1};requestAnimationFrame(O)}else{const T=S.getBoundingClientRect(),L=T.top+window.scrollY-window.innerHeight/2+T.height/2;window.scrollTo({top:L,behavior:"smooth"}),setTimeout(()=>{s.value=!1},1200)}}else console.error(`Keyword section not found: keyword-${y}`),s.value=!1},c=y=>{if(h.length===0||y<0||y>=h.length)return;const I=h[y].getBoundingClientRect().top+window.scrollY-150;window.scrollTo({top:I,behavior:"smooth"}),h.forEach((T,L)=>{L===y?T.classList.add("search-highlight-active"):T.classList.remove("search-highlight-active")})},l=()=>{h.length!==0&&(o.value=(o.value+1)%h.length,c(o.value))},v=()=>{h.length!==0&&(o.value=o.value<=0?h.length-1:o.value-1,c(o.value))},m=y=>{r.value===0||!document.activeElement?.classList.contains("search-input")||(y.key==="ArrowDown"?(y.preventDefault(),l()):y.key==="ArrowUp"&&(y.preventDefault(),v()))};return ke(t,()=>{if(u&&clearTimeout(u),s.value=!1,!t.value.trim()){i(),we(null);return}u=window.setTimeout(()=>{i()},400)}),re(()=>{window.addEventListener("keydown",m)}),oe(()=>{window.removeEventListener("keydown",m),u&&clearTimeout(u)}),(y,w)=>(U(),q("div",{class:M(["search-container",{"match-found":n.value}])},[w[8]||(w[8]=b("svg",{class:"search-icon",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[b("circle",{cx:"11",cy:"11",r:"8"}),b("path",{d:"m21 21-4.35-4.35"})],-1)),Ye(b("input",{"onUpdate:modelValue":w[0]||(w[0]=x=>t.value=x),type:"text",class:"search-input",placeholder:"Search...",onKeydown:w[1]||(w[1]=ze(Je(x=>f.value?a():l(),["prevent"]),["enter"]))},null,544),[[We,t.value]]),b("div",_t,[b("div",{class:M(["search-navigation",{"is-active":!f.value}])},[b("button",{onClick:v,class:"button button--nav button--arrow",disabled:r.value===0,title:"Previous match (↑)"},[...w[2]||(w[2]=[b("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[b("path",{d:"m18 15-6-6-6 6"})],-1)])],8,St),b("span",It,Re(o.value+1)+"/"+Re(r.value),1),b("button",{onClick:l,class:"button button--nav button--arrow",disabled:r.value===0,title:"Next match (↓)"},[...w[3]||(w[3]=[b("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[b("path",{d:"m6 9 6 6 6-6"})],-1)])],8,Tt)],2),b("button",{class:M(["button button--nav button--not-found not-found-button",{"is-active":f.value}]),onClick:a,disabled:s.value},[b("span",Lt,[b("span",{class:M(["not-text",{strikethrough:d.value&&!s.value}])},[w[5]||(w[5]=b("span",null,"n",-1)),s.value?(U(),q("span",Ct,[...w[4]||(w[4]=[b("svg",{class:"spinner-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[b("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})],-1)])])):(U(),q("span",$t,"o")),w[6]||(w[6]=b("span",null,"t",-1))],2),w[7]||(w[7]=b("span",{class:"found-text"},"found",-1))])],10,At)])],2))}}),Ae=G(Nt,[["__scopeId","data-v-fcd9f152"]]),Ot={class:"nav-left"},Mt={class:"nav-links"},Pt={class:"mobile-menu-content"},jt={class:"mobile-nav-links"},Bt=V({__name:"Navigation",setup(e){const t=P(!1),o=P(!1),r=P("home"),s=P(!1),u=P(!1);let p=null;const h=["home","therapy","emdr","about","contact"],g=()=>{s.value=!s.value,s.value?(u.value=!1,document.body.style.overflow="hidden"):document.body.style.overflow=""},f=()=>{s.value=!1,document.body.style.overflow=""},d=()=>{u.value=!u.value,u.value&&(s.value=!1)},n=c=>{if(f(),c==="home"){window.scrollTo({top:0,behavior:"smooth"});return}const l=document.getElementById(c);if(!l)return;const y=l.getBoundingClientRect().top+window.scrollY-100;window.scrollTo({top:y,behavior:"smooth"})},i=()=>{const c=window.scrollY,l=150;for(let v=h.length-1;v>=0;v--){const m=h[v];if(!m)continue;const y=document.getElementById(m);if(y){const w=y.getBoundingClientRect().top+c;if(m==="home"){if(c<l){r.value="home";return}}else if(c+l>=w){r.value=m;return}}}c<l&&(r.value="home")},a=()=>{i(),o.value?t.value=!0:(o.value=!0,p=window.setTimeout(()=>{t.value=!0},1e3))};return re(()=>{window.addEventListener("scroll",a,{passive:!0}),i(),window.scrollY>0&&a()}),oe(()=>{window.removeEventListener("scroll",a),p&&clearTimeout(p),document.body.style.overflow=""}),(c,l)=>(U(),q(he,null,[b("button",{class:M(["mobile-hamburger",{"is-open":s.value}]),onClick:g,"aria-label":"Toggle menu"},[...l[10]||(l[10]=[b("span",{class:"hamburger-line"},null,-1),b("span",{class:"hamburger-line"},null,-1),b("span",{class:"hamburger-line"},null,-1)])],2),b("button",{class:M(["mobile-search-toggle",{"is-active":u.value}]),onClick:d,"aria-label":"Toggle search"},[...l[11]||(l[11]=[b("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[b("circle",{cx:"11",cy:"11",r:"8"}),b("path",{d:"m21 21-4.35-4.35"})],-1)])],2),b("nav",{class:M(["navigation",{"is-visible":t.value}])},[b("div",Ot,[l[17]||(l[17]=b("div",{class:"nav-name"},"ASH MARTIN, LCSW",-1)),b("div",Mt,[b("button",{onClick:l[0]||(l[0]=v=>n("home")),class:M(["nav-link",{"is-active":r.value==="home"}])},[...l[12]||(l[12]=[b("span",null,"Home",-1)])],2),b("button",{onClick:l[1]||(l[1]=v=>n("therapy")),class:M(["nav-link",{"is-active":r.value==="therapy"}])},[...l[13]||(l[13]=[b("span",null,"Therapy",-1)])],2),b("button",{onClick:l[2]||(l[2]=v=>n("emdr")),class:M(["nav-link",{"is-active":r.value==="emdr"}])},[...l[14]||(l[14]=[b("span",null,"EMDR & Adjunctive",-1)])],2),b("button",{onClick:l[3]||(l[3]=v=>n("about")),class:M(["nav-link",{"is-active":r.value==="about"}])},[...l[15]||(l[15]=[b("span",null,"About",-1)])],2),b("button",{onClick:l[4]||(l[4]=v=>n("contact")),class:M(["nav-link nav-link-contact",{"is-active":r.value==="contact"}])},[...l[16]||(l[16]=[b("span",null,"Contact",-1)])],2)])]),F(Ae,{"is-visible":t.value,class:"desktop-search"},null,8,["is-visible"])],2),b("div",{class:M(["mobile-menu-overlay",{"is-open":s.value}])},[b("div",Pt,[l[18]||(l[18]=b("div",{class:"mobile-nav-name"},"ASH MARTIN, LCSW",-1)),b("div",jt,[b("button",{onClick:l[5]||(l[5]=v=>n("home")),class:M(["mobile-nav-link",{"is-active":r.value==="home"}])}," Home ",2),b("button",{onClick:l[6]||(l[6]=v=>n("therapy")),class:M(["mobile-nav-link",{"is-active":r.value==="therapy"}])}," Therapy ",2),b("button",{onClick:l[7]||(l[7]=v=>n("emdr")),class:M(["mobile-nav-link",{"is-active":r.value==="emdr"}])}," EMDR & Adjunctive ",2),b("button",{onClick:l[8]||(l[8]=v=>n("about")),class:M(["mobile-nav-link",{"is-active":r.value==="about"}])}," About ",2),b("button",{onClick:l[9]||(l[9]=v=>n("contact")),class:M(["mobile-nav-link mobile-nav-link-contact",{"is-active":r.value==="contact"}])}," Contact ",2)])])],2),b("div",{class:M(["mobile-search-overlay",{"is-open":u.value}])},[F(Ae,{"is-visible":t.value,class:"mobile-search"},null,8,["is-visible"])],2)],64))}}),Dt=G(Bt,[["__scopeId","data-v-d2a29f95"]]),Ht=["id"],Ft={class:"keyword-section-background"},Ut={class:"text-box keyword-text-box"},qt=["innerHTML"],Yt=V({__name:"KeywordSections",setup(e){let t=window.scrollY;const o=()=>{const u=[];return Te.forEach(p=>{const h=document.getElementById(`keyword-${p}`);if(h){const g=h.getBoundingClientRect();u.push({id:p,top:g.top+window.scrollY,bottom:g.bottom+window.scrollY})}}),u},r=u=>{const p=window.scrollY,h=Math.abs(p-t);if(Z.value){t=p;return}if(!z.value){const g=o();for(const f of g)if(p>=f.top-100&&p<=f.bottom+100){u?.preventDefault(),window.scrollTo({top:f.top-100,behavior:"auto"}),t=f.top-100;return}}if(t=p,!(de.value||h<10)&&z.value){const g=`keyword-${z.value}`,f=document.getElementById(g);if(f){const d=f.getBoundingClientRect(),n=window.innerHeight,i=100;(d.bottom<-i||d.top>n+i)&&we(null)}}},s=u=>{if(!z.value){const p=o(),h=window.scrollY,g=u.deltaY;for(const f of p)if(h+g>=f.top-100&&h+g<=f.bottom+100)return u.preventDefault(),g>0&&h<f.top-100&&window.scrollTo({top:f.top-100,behavior:"smooth"}),!1}};return re(()=>{window.addEventListener("scroll",r,{passive:!1}),window.addEventListener("wheel",s,{passive:!1})}),oe(()=>{window.removeEventListener("scroll",r),window.removeEventListener("wheel",s)}),ke(z,u=>{u&&(Z.value=!0,setTimeout(()=>{Z.value=!1},2e3))}),(u,p)=>(U(!0),q(he,null,Pe(J(Te),h=>(U(),q("section",{key:h,id:`keyword-${h}`,class:M(["section keyword-section",{"is-visible":J(z)===h}])},[b("div",Ft,[b("div",Ut,[b("div",{class:"keyword-content",innerHTML:J(xe)[h]},null,8,qt)])])],10,Ht))),128))}}),Wt=G(Yt,[["__scopeId","data-v-68b893e9"]]),zt={class:"app"},Jt=V({__name:"App",setup(e){const t=X(()=>Q(()=>import("./Therapy-CqOeBVv3.js"),__vite__mapDeps([0,1]))),o=X(()=>Q(()=>import("./EMDR-Bk7GGiDV.js"),__vite__mapDeps([2,1,3,4]))),r=X(()=>Q(()=>import("./About-HjDYfDHs.js"),__vite__mapDeps([5,1]))),s=X(()=>Q(()=>import("./Location-DXFTewyw.js"),__vite__mapDeps([6,1,3,7]))),u=X(()=>Q(()=>import("./ContactForm-CUlC8s0N.js"),__vite__mapDeps([8,1,3,9])));return(p,h)=>(U(),q(he,null,[F(ht),b("div",zt,[F(mt),F(bt),F(J(t)),F(J(o)),F(J(r)),F(J(s)),F(J(u)),F(Wt)]),F(Dt)],64))}}),Vt=G(Jt,[["__scopeId","data-v-68f447b3"]]);var Kt=Object.defineProperty,Gt=(e,t,o)=>t in e?Kt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,$=(e,t,o)=>Gt(e,typeof t!="symbol"?t+"":t,o);let j=(function(e){return e.DOCUMENT="doc",e.HEADING="heading",e.PARAGRAPH="paragraph",e.QUOTE="blockquote",e.OL_LIST="ordered_list",e.UL_LIST="bullet_list",e.LIST_ITEM="list_item",e.CODE_BLOCK="code_block",e.HR="horizontal_rule",e.BR="hard_break",e.IMAGE="image",e.EMOJI="emoji",e.COMPONENT="blok",e.TABLE="table",e.TABLE_ROW="tableRow",e.TABLE_CELL="tableCell",e.TABLE_HEADER="tableHeader",e})({}),H=(function(e){return e.BOLD="bold",e.STRONG="strong",e.STRIKE="strike",e.UNDERLINE="underline",e.ITALIC="italic",e.CODE="code",e.LINK="link",e.ANCHOR="anchor",e.STYLED="styled",e.SUPERSCRIPT="superscript",e.SUBSCRIPT="subscript",e.TEXT_STYLE="textStyle",e.HIGHLIGHT="highlight",e})({}),Xt=(function(e){return e.TEXT="text",e})({}),ie=(function(e){return e.URL="url",e.STORY="story",e.ASSET="asset",e.EMAIL="email",e})({});const Qt=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"],Zt=(e={})=>{const{custom:t,...o}=e,r={...o,...t};return Object.keys(r).map(s=>`${s}="${r[s]}"`).join(" ")},en=(e={})=>Object.keys(e).map(t=>`${t}: ${e[t]}`).join("; ");function tn(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}const te=e=>Object.fromEntries(Object.entries(e).filter(([t,o])=>o!==void 0));function nn(e,t){if(!t)return{src:e,attrs:{}};let o=0,r=0;const s={},u=[];function p(g,f,d,n,i){typeof g!="number"||g<=f||g>=d?console.warn(`[StoryblokRichText] - ${n.charAt(0).toUpperCase()+n.slice(1)} value must be a number between ${f} and ${d} (inclusive)`):i.push(`${n}(${g})`)}if(typeof t=="object"){if(t.width!==void 0&&(typeof t.width=="number"&&t.width>=0?(s.width=t.width,o=t.width):console.warn("[StoryblokRichText] - Width value must be a number greater than or equal to 0")),t.height!==void 0&&(typeof t.height=="number"&&t.height>=0?(s.height=t.height,r=t.height):console.warn("[StoryblokRichText] - Height value must be a number greater than or equal to 0")),t.height===0&&t.width===0&&(delete s.width,delete s.height,console.warn("[StoryblokRichText] - Width and height values cannot both be 0")),t.loading&&["lazy","eager"].includes(t.loading)&&(s.loading=t.loading),t.class&&(s.class=t.class),t.filters){const{filters:g}=t||{},{blur:f,brightness:d,fill:n,format:i,grayscale:a,quality:c,rotate:l}=g||{};f&&p(f,0,100,"blur",u),c&&p(c,0,100,"quality",u),d&&p(d,0,100,"brightness",u),n&&u.push(`fill(${n})`),a&&u.push("grayscale()"),l&&[0,90,180,270].includes(t.filters.rotate||0)&&u.push(`rotate(${l})`),i&&["webp","png","jpeg"].includes(i)&&u.push(`format(${i})`)}t.srcset&&(s.srcset=t.srcset.map(g=>{if(typeof g=="number")return`${e}/m/${g}x0/${u.length>0?`filters:${u.join(":")}`:""} ${g}w`;if(Array.isArray(g)&&g.length===2){const[f,d]=g;return`${e}/m/${f}x${d}/${u.length>0?`filters:${u.join(":")}`:""} ${f}w`}else{console.warn("[StoryblokRichText] - srcset entry must be a number or a tuple of two numbers");return}}).join(", ")),t.sizes&&(s.sizes=t.sizes.join(", "))}let h=`${e}/m/`;return(o>0||r>0)&&(h=`${h}${o}x${r}/`),u.length>0&&(h=`${h}filters:${u.join(":")}`),{src:h,attrs:s}}function Le(e,t={},o){const r=Zt(t),s=r?`${e} ${r}`:e,u=Array.isArray(o)?o.join(""):o||"";if(e){if(Qt.includes(e))return`<${s}>`}else return u;return`<${s}>${u}</${e}>`}function rn(e={}){const t=new Map,{renderFn:o=Le,textFn:r=tn,resolvers:s={},optimizeImages:u=!1,keyedResolvers:p=!1}=e,h=o!==Le,g=(k={})=>{const{textAlign:E,class:R,id:_,style:A,...O}=k,C=[];return A&&C.push(A.endsWith(";")?A:`${A};`),E&&C.push(`text-align: ${E};`),te({...O,class:R,id:_,...C.length>0?{style:C.join(" ")}:{}})},f=k=>(E,R)=>{const _=g(E.attrs);return R.render(k,_,E.children||null)},d=(k,E)=>{const{src:R,alt:_,title:A,srcset:O,sizes:C}=k.attrs||{};let B=R,N={};if(u){const{src:fe,attrs:Ue}=nn(R,u);B=fe,N=Ue}const K={src:B,alt:_,title:A,srcset:O,sizes:C,...N};return E.render("img",te(K))},n=(k,E)=>{const{level:R,..._}=k.attrs||{},A=g(_);return E.render(`h${R}`,A,k.children)},i=(k,E)=>{var R,_,A,O;const C=E.render("img",{src:(R=k.attrs)==null?void 0:R.fallbackImage,alt:(_=k.attrs)==null?void 0:_.alt,style:"width: 1.25em; height: 1.25em; vertical-align: text-top",draggable:"false",loading:"lazy"});return E.render("span",{"data-type":"emoji","data-name":(A=k.attrs)==null?void 0:A.name,"data-emoji":(O=k.attrs)==null?void 0:O.emoji},C)},a=(k,E)=>E.render("pre",k.attrs||{},E.render("code",{},k.children||"")),c=(k,E=!1)=>({text:R,attrs:_},A)=>{const{class:O,id:C,...B}=_||{},N=E?{class:O,id:C,style:en(B)||void 0}:_||{};return A.render(k,te(N),R)},l=k=>ee(k),v=k=>{const{marks:E,...R}=k;if("text"in k){if(E)return E.reduce((A,O)=>l({...O,text:A}),l({...R,children:R.children}));const _=k.attrs||{};if(p){const A=t.get("txt")||0;t.set("txt",A+1),_.key=`txt-${A}`}return r(R.text,_)}return""},m=(k,E)=>{const{linktype:R,href:_,anchor:A,...O}=k.attrs||{};let C="";switch(R){case ie.ASSET:case ie.URL:C=_;break;case ie.EMAIL:C=`mailto:${_}`;break;case ie.STORY:C=_,A&&(C=`${C}#${A}`);break;default:C=_;break}const B={...O};return C&&(B.href=C),E.render("a",B,k.text)},y=(k,E)=>{var R,_;return console.warn("[StoryblokRichtText] - BLOK resolver is not available for vanilla usage"),E.render("span",{blok:(R=k?.attrs)==null?void 0:R.body[0],id:(_=k.attrs)==null?void 0:_.id,style:"display: none"})},w=(k,E)=>{const R=g(k.attrs),_=k.children||null;return E.render("table",R,E.render("tbody",{},_))},x=(k,E)=>{const R=g(k.attrs);return E.render("tr",R,k.children)},S=(k,E)=>{const{colspan:R,rowspan:_,colwidth:A,backgroundColor:O,textAlign:C,...B}=k.attrs||{},N=[];A&&N.push(`width: ${A}px;`),O&&N.push(`background-color: ${O};`),C&&N.push(`text-align: ${C};`);const K={...B,...R>1?{colspan:R}:{},..._>1?{rowspan:_}:{},...N.length>0?{style:N.join(" ")}:{}};return E.render("td",te(K),k.children)},I=(k,E)=>{const{colspan:R,rowspan:_,colwidth:A,backgroundColor:O,textAlign:C,...B}=k.attrs||{},N=[];A&&N.push(`width: ${A}px;`),O&&N.push(`background-color: ${O};`),C&&N.push(`text-align: ${C};`);const K={...B,...R>1?{colspan:R}:{},..._>1?{rowspan:_}:{},...N.length>0?{style:N.join(" ")}:{}};return E.render("th",te(K),k.children)},T=new Map([[j.DOCUMENT,f("")],[j.HEADING,n],[j.PARAGRAPH,f("p")],[j.UL_LIST,f("ul")],[j.OL_LIST,f("ol")],[j.LIST_ITEM,f("li")],[j.IMAGE,d],[j.EMOJI,i],[j.CODE_BLOCK,a],[j.HR,f("hr")],[j.BR,f("br")],[j.QUOTE,f("blockquote")],[j.COMPONENT,y],[Xt.TEXT,v],[H.LINK,m],[H.ANCHOR,m],[H.STYLED,c("span",!0)],[H.BOLD,c("strong")],[H.TEXT_STYLE,c("span",!0)],[H.ITALIC,c("em")],[H.UNDERLINE,c("u")],[H.STRIKE,c("s")],[H.CODE,c("code")],[H.SUPERSCRIPT,c("sup")],[H.SUBSCRIPT,c("sub")],[H.HIGHLIGHT,c("mark")],[j.TABLE,w],[j.TABLE_ROW,x],[j.TABLE_CELL,S],[j.TABLE_HEADER,I]]),L=new Map([...T,...Object.entries(s).map(([k,E])=>[k,E])]),D=()=>({render:(k,E={},R)=>{if(p&&k){const _=t.get(k)||0;t.set(k,_+1),E.key=`${k}-${_}`}return o(k,E,R)},originalResolvers:T,mergedResolvers:L});function Y(k){const E=L.get(k.type);if(!E)return console.error("<Storyblok>",`No resolver found for node type ${k.type}`),"";const R=D();if(k.type==="text")return E(k,R);const _=k.content?k.content.map(ee):void 0;return E({...k,children:_},R)}function ee(k){return k.type==="doc"?h?k.content.map(Y):k.content.map(Y).join(""):Array.isArray(k)?k.map(Y):Y(k)}return{render:ee}}let Ce=!1;const $e=[],on=e=>new Promise((t,o)=>{if(typeof window>"u"){o(new Error("Cannot load Storyblok bridge: window is undefined (server-side environment)"));return}if(window.storyblokRegisterEvent=s=>{if(!window.location.search.includes("_storyblok")){console.warn("You are not in Draft Mode or in the Visual Editor.");return}Ce?s():$e.push(s)},document.getElementById("storyblok-javascript-bridge")){t(void 0);return}const r=document.createElement("script");r.async=!0,r.src=e,r.id="storyblok-javascript-bridge",r.onerror=s=>o(s),r.onload=s=>{$e.forEach(u=>u()),Ce=!0,t(s)},document.getElementsByTagName("head")[0].appendChild(r)}),ve=(e="")=>e.includes("/cdn/"),sn=(e,t=25,o=1)=>({...e,per_page:t,page:o}),an=e=>new Promise(t=>setTimeout(t,e)),ln=(e=0,t)=>Array.from({length:e},t),cn=(e=0,t=e)=>{const o=Math.abs(t-e)||0,r=e<t?1:-1;return ln(o,(s,u)=>u*r+e)},un=async(e,t)=>Promise.all(e.map(t)),dn=(e=[],t)=>e.map(t).reduce((o,r)=>[...o,...r],[]),Ee=(e,t,o)=>{const r=[];for(const s in e){if(!Object.prototype.hasOwnProperty.call(e,s))continue;const u=e[s];if(u==null)continue;const p=o?"":encodeURIComponent(s);let h;typeof u=="object"?h=Ee(u,t?t+encodeURIComponent(`[${p}]`):p,Array.isArray(u)):h=`${t?t+encodeURIComponent(`[${p}]`):p}=${encodeURIComponent(u)}`,r.push(h)}return r.join("&")},Ne=e=>{const t={eu:"api.storyblok.com",us:"api-us.storyblok.com",cn:"app.storyblokchina.cn",ap:"api-ap.storyblok.com",ca:"api-ca.storyblok.com"};return t[e]??t.eu};var hn=class{constructor(e){$(this,"baseURL"),$(this,"timeout"),$(this,"headers"),$(this,"responseInterceptor"),$(this,"fetch"),$(this,"ejectInterceptor"),$(this,"url"),$(this,"parameters"),$(this,"fetchOptions"),this.baseURL=e.baseURL,this.headers=e.headers||new Headers,this.timeout=e!=null&&e.timeout?e.timeout*1e3:0,this.responseInterceptor=e.responseInterceptor,this.fetch=(...t)=>e.fetch?e.fetch(...t):fetch(...t),this.ejectInterceptor=!1,this.url="",this.parameters={},this.fetchOptions={}}get(e,t){return this.url=e,this.parameters=t,this._methodHandler("get")}post(e,t){return this.url=e,this.parameters=t,this._methodHandler("post")}put(e,t){return this.url=e,this.parameters=t,this._methodHandler("put")}delete(e,t){return this.url=e,this.parameters=t??{},this._methodHandler("delete")}async _responseHandler(e){const t=[],o={data:{},headers:{},status:0,statusText:""};e.status!==204&&await e.json().then(r=>{o.data=r});for(const r of e.headers.entries())t[r[0]]=r[1];return o.headers={...t},o.status=e.status,o.statusText=e.statusText,o}async _methodHandler(e){let t=`${this.baseURL}${this.url}`,o=null;e==="get"?t=`${this.baseURL}${this.url}?${Ee(this.parameters)}`:o=JSON.stringify(this.parameters);const r=new URL(t),s=new AbortController,{signal:u}=s;let p=null;this.timeout&&(p=setTimeout(()=>s.abort(),this.timeout));try{const h=await this.fetch(`${r}`,{method:e,headers:this.headers,body:o,signal:u,...this.fetchOptions});this.timeout&&p&&clearTimeout(p);const g=await this._responseHandler(h);return this.responseInterceptor&&!this.ejectInterceptor?this._statusHandler(this.responseInterceptor(g)):this._statusHandler(g)}catch(h){return{message:h}}}setFetchOptions(e={}){Object.keys(e).length>0&&"method"in e&&delete e.method,this.fetchOptions={...e}}eject(){this.ejectInterceptor=!0}_normalizeErrorMessage(e){if(Array.isArray(e))return e[0]||"Unknown error";if(e&&typeof e=="object"){if(e.error)return e.error;for(const t in e){if(Array.isArray(e[t]))return`${t}: ${e[t][0]}`;if(typeof e[t]=="string")return`${t}: ${e[t]}`}if(e.slug)return e.slug}return"Unknown error"}_statusHandler(e){const t=/20[0-6]/g;return new Promise((o,r)=>{if(t.test(`${e.status}`))return o(e);const s={message:this._normalizeErrorMessage(e.data),status:e.status,response:e};r(s)})}},fn=hn;const Oe="SB-Agent",me={defaultAgentName:"SB-JS-CLIENT",defaultAgentVersion:"SB-Agent-Version",packageVersion:"7.0.0"},De={DRAFT:"draft",PUBLISHED:"published"},pn=25,ge={SMALL:25,MEDIUM:50,LARGE:75},ne={SINGLE_OR_SMALL:50,MEDIUM:15,LARGE:10,VERY_LARGE:6},ye=1e3,ae=3;function vn(e){return e.version===De.DRAFT}function mn(e,t){const o=e.includes("/cdn/stories/"),r=e.split("/").length>3&&!e.endsWith("/cdn/stories"),s="find_by"in t;return o&&r||s}function gn(e){return e<=ge.SMALL?ne.SINGLE_OR_SMALL:e<=ge.MEDIUM?ne.MEDIUM:e<=ge.LARGE?ne.LARGE:ne.VERY_LARGE}function le(e,t,o={},r){if(o.userRateLimit!==void 0)return Math.min(o.userRateLimit,ye);if(o.serverHeadersRateLimit!==void 0)return Math.min(o.serverHeadersRateLimit,ye);if(r!==void 0)return r;if(t&&!vn(t))return ye;if(mn(e,t))return ne.SINGLE_OR_SMALL;const s=t.per_page||pn;return gn(s)}function yn(e){if(!e)return null;const t=e["x-ratelimit"]||e["X-RateLimit"],o=e["x-ratelimit-policy"]||e["X-RateLimit-Policy"];if(!t&&!o)return null;const r={};if(t){const s=t.match(/r=(\d+)/);s&&(r.remaining=Number.parseInt(s[1],10))}if(o){const s=o.match(/q=(\d+)/);s&&(r.max=Number.parseInt(s[1],10))}return Object.keys(r).length>0?r:null}function wn(e,t=!1){return{userRateLimit:e,serverHeadersRateLimit:void 0,isManagementApi:t}}var bn=class extends Error{constructor(e){super(e),this.name="AbortError"}};function kn(e,t,o){if(!Number.isFinite(t))throw new TypeError("Expected `limit` to be a finite number");if(!Number.isFinite(o))throw new TypeError("Expected `interval` to be a finite number");const r=[];let s=[],u=0,p=!1;const h=async()=>{u++;const f=r.shift();if(f)try{const n=await e(...f.args);f.resolve(n)}catch(n){f.reject(n)}const d=setTimeout(()=>{u--,r.length>0&&h(),s=s.filter(n=>n!==d)},o);s.includes(d)||s.push(d)},g=(...f)=>p?Promise.reject(new Error("Throttled function is already aborted and not accepting new promises")):new Promise((d,n)=>{r.push({resolve:d,reject:n,args:f}),u<t&&h()});return g.abort=()=>{p=!0,s.forEach(clearTimeout),s=[],r.forEach(f=>f.reject(()=>new bn("Throttle function aborted"))),r.length=0},g}var xn=kn,En=class{constructor(e,t=1e3){$(this,"queues"),$(this,"interval"),$(this,"throttledRequestFn"),this.queues=new Map,this.interval=t,this.throttledRequestFn=e}getQueue(e){let t=this.queues.get(e);return t||(t=xn(this.throttledRequestFn,e,this.interval),this.queues.set(e,t)),t}execute(e,...t){return this.getQueue(e)(...t)}abortAll(){this.queues.forEach(e=>{var t;(t=e.abort)==null||t.call(e)}),this.queues.clear()}getQueueCount(){return this.queues.size}};let ce={};const W={};var Rn=class{constructor(e,t){$(this,"client"),$(this,"maxRetries"),$(this,"retriesDelay"),$(this,"throttleManager"),$(this,"accessToken"),$(this,"cache"),$(this,"resolveCounter"),$(this,"relations"),$(this,"links"),$(this,"version"),$(this,"rateLimitConfig"),$(this,"richTextResolver"),$(this,"resolveNestedRelations"),$(this,"stringifiedStoriesCache"),$(this,"inlineAssets");let o=e.endpoint||t;if(!o){const s=e.https===!1?"http":"https";e.oauthToken?o=`${s}://${Ne(e.region)}/v1`:o=`${s}://${Ne(e.region)}/v2`}const r=new Headers;r.set("Content-Type","application/json"),r.set("Accept","application/json"),e.headers&&(e.headers.constructor.name==="Headers"?e.headers.entries().toArray():Object.entries(e.headers)).forEach(([s,u])=>{r.set(s,u)}),r.has(Oe)||(r.set(Oe,me.defaultAgentName),r.set(me.defaultAgentVersion,me.packageVersion)),e.oauthToken&&r.set("Authorization",e.oauthToken),this.rateLimitConfig=wn(e.rateLimit,!!e.oauthToken),this.maxRetries=e.maxRetries||10,this.retriesDelay=300,this.throttleManager=new En(this.throttledRequest.bind(this),1e3),this.accessToken=e.accessToken||"",this.relations={},this.links={},this.cache=e.cache||{clear:"manual"},this.resolveCounter=0,this.resolveNestedRelations=e.resolveNestedRelations||!0,this.stringifiedStoriesCache={},this.version=e.version||De.PUBLISHED,this.inlineAssets=e.inlineAssets||!1,this.client=new fn({baseURL:o,timeout:e.timeout||0,headers:r,responseInterceptor:e.responseInterceptor,fetch:e.fetch})}parseParams(e){return e.token||(e.token=this.getToken()),e.cv||(e.cv=W[e.token]),Array.isArray(e.resolve_relations)&&(e.resolve_relations=e.resolve_relations.join(",")),typeof e.resolve_relations<"u"&&(e.resolve_level=2),e}factoryParamOptions(e,t){return ve(e)?this.parseParams(t):t}makeRequest(e,t,o,r,s){const u=this.factoryParamOptions(e,sn(t,o,r));return this.cacheResponse(e,u,void 0,s)}get(e,t={},o){t||(t={});const r=`/${e}`;ve(r)&&(t.version=t.version||this.version);const s=this.factoryParamOptions(r,t);return this.cacheResponse(r,s,void 0,o)}async getAll(e,t={},o,r){const s=t?.per_page||25,u=`/${e}`.replace(/\/$/,""),p=o??u.substring(u.lastIndexOf("/")+1);t.version=t.version||this.version;const h=1,g=await this.makeRequest(u,t,s,h,r),f=g.total?Math.ceil(g.total/(g.perPage||s)):1,d=await un(cn(h,f),n=>this.makeRequest(u,t,s,n+1,r));return dn([g,...d],n=>Object.values(n.data[p]))}post(e,t={},o){const r=`/${e}`,s=le(void 0,void 0,this.rateLimitConfig,ae);return this.throttleManager.execute(s,"post",r,t,o)}put(e,t={},o){const r=`/${e}`,s=le(void 0,void 0,this.rateLimitConfig,ae);return this.throttleManager.execute(s,"put",r,t,o)}delete(e,t={},o){t||(t={});const r=`/${e}`,s=le(void 0,void 0,this.rateLimitConfig,ae);return this.throttleManager.execute(s,"delete",r,t,o)}getStories(e={},t){return this._addResolveLevel(e),this.get("cdn/stories",e,t)}getStory(e,t={},o){return this._addResolveLevel(t),this.get(`cdn/stories/${e}`,t,o)}getToken(){return this.accessToken}ejectInterceptor(){this.client.eject()}_addResolveLevel(e){typeof e.resolve_relations<"u"&&(e.resolve_level=2)}_cleanCopy(e){return JSON.parse(JSON.stringify(e))}_insertLinks(e,t,o){const r=e[t];r&&r.fieldtype==="multilink"&&r.linktype==="story"&&typeof r.id=="string"&&this.links[o][r.id]?r.story=this._cleanCopy(this.links[o][r.id]):r&&r.linktype==="story"&&typeof r.uuid=="string"&&this.links[o][r.uuid]&&(r.story=this._cleanCopy(this.links[o][r.uuid]))}getStoryReference(e,t){return this.relations[e][t]?JSON.parse(this.stringifiedStoriesCache[t]||JSON.stringify(this.relations[e][t])):t}_resolveField(e,t,o){const r=e[t];typeof r=="string"?e[t]=this.getStoryReference(o,r):Array.isArray(r)&&(e[t]=r.map(s=>this.getStoryReference(o,s)).filter(Boolean))}_insertRelations(e,t,o,r){if(Array.isArray(o)?o.find(u=>u.endsWith(`.${t}`)):o.endsWith(`.${t}`)){this._resolveField(e,t,r);return}const s=e.component?`${e.component}.${t}`:t;(Array.isArray(o)?o.includes(s):o===s)&&this._resolveField(e,t,r)}iterateTree(e,t,o){const r=(s,u="")=>{if(!(!s||s._stopResolving)){if(Array.isArray(s))s.forEach((p,h)=>r(p,`${u}[${h}]`));else if(typeof s=="object")for(const p in s){const h=u?`${u}.${p}`:p;(s.component&&s._uid||s.type==="link")&&(this._insertRelations(s,p,t,o),this._insertLinks(s,p,o)),r(s[p],h)}}};r(e.content)}async resolveLinks(e,t,o){let r=[];if(e.link_uuids){const s=e.link_uuids.length,u=[],p=50;for(let h=0;h<s;h+=p){const g=Math.min(s,h+p);u.push(e.link_uuids.slice(h,g))}for(let h=0;h<u.length;h++)(await this.getStories({per_page:p,language:t.language,version:t.version,starts_with:t.starts_with,by_uuids:u[h].join(",")})).data.stories.forEach(g=>{r.push(g)})}else r=e.links;r.forEach(s=>{this.links[o][s.uuid]={...s,_stopResolving:!0}})}async resolveRelations(e,t,o){let r=[];if(e.rel_uuids){const s=e.rel_uuids.length,u=[],p=50;for(let h=0;h<s;h+=p){const g=Math.min(s,h+p);u.push(e.rel_uuids.slice(h,g))}for(let h=0;h<u.length;h++)(await this.getStories({per_page:p,language:t.language,version:t.version,starts_with:t.starts_with,by_uuids:u[h].join(","),excluding_fields:t.excluding_fields})).data.stories.forEach(g=>{r.push(g)});r.length>0&&(e.rels=r,delete e.rel_uuids)}else r=e.rels;r&&r.length>0&&r.forEach(s=>{this.relations[o][s.uuid]={...s,_stopResolving:!0}})}async resolveStories(e,t,o){var r,s;let u=[];if(this.links[o]={},this.relations[o]={},typeof t.resolve_relations<"u"&&t.resolve_relations.length>0&&(typeof t.resolve_relations=="string"&&(u=t.resolve_relations.split(",")),await this.resolveRelations(e,t,o)),t.resolve_links&&["1","story","url","link"].includes(t.resolve_links)&&((r=e.links)!=null&&r.length||(s=e.link_uuids)!=null&&s.length)&&await this.resolveLinks(e,t,o),this.resolveNestedRelations)for(const p in this.relations[o])this.iterateTree(this.relations[o][p],u,o);e.story?this.iterateTree(e.story,u,o):e.stories.forEach(p=>{this.iterateTree(p,u,o)}),this.stringifiedStoriesCache={},delete this.links[o],delete this.relations[o]}async cacheResponse(e,t,o,r){const s=Ee({url:e,params:t}),u=this.cacheProvider();if(t.version==="published"&&e!=="/cdn/spaces/me"){const g=await u.get(s);if(g)return Promise.resolve(g)}const p=!ve(e)&&this.rateLimitConfig.isManagementApi?ae:void 0,h=le(e,t,this.rateLimitConfig,p);return new Promise(async(g,f)=>{var d;try{const n=await this.throttleManager.execute(h,"get",e,t,r);if(n.status!==200)return f(n);let i={data:n.data,headers:n.headers};const a=yn(n.headers);if(a?.max!==void 0&&(this.rateLimitConfig.serverHeadersRateLimit=a.max),(d=n.headers)!=null&&d["per-page"]&&(i=Object.assign({},i,{perPage:n.headers["per-page"]?Number.parseInt(n.headers["per-page"]):0,total:n.headers["per-page"]?Number.parseInt(n.headers.total):0})),i.data.story||i.data.stories){const l=this.resolveCounter=++this.resolveCounter%1e3;await this.resolveStories(i.data,t,`${l}`),i=await this.processInlineAssets(i)}t.version==="published"&&e!=="/cdn/spaces/me"&&await u.set(s,i);const c=this.cache.clear==="onpreview"&&t.version==="draft"||this.cache.clear==="auto";return t.token&&i.data.cv&&(c&&W[t.token]&&W[t.token]!==i.data.cv&&await this.flushCache(),W[t.token]=i.data.cv),g(i)}catch(n){if(n.response&&n.status===429&&(o=typeof o>"u"?0:o+1,o<this.maxRetries))return console.log(`Hit rate limit. Retrying in ${this.retriesDelay/1e3} seconds.`),await an(this.retriesDelay),this.cacheResponse(e,t,o).then(g).catch(f);f(n)}})}throttledRequest(e,t,o,r){return this.client.setFetchOptions(r),this.client[e](t,o)}cacheVersions(){return W}cacheVersion(){return W[this.accessToken]}setCacheVersion(e){this.accessToken&&(W[this.accessToken]=e)}clearCacheVersion(){this.accessToken&&(W[this.accessToken]=0)}cacheProvider(){switch(this.cache.type){case"memory":return{get(e){return Promise.resolve(ce[e])},getAll(){return Promise.resolve(ce)},set(e,t){return ce[e]=t,Promise.resolve(void 0)},flush(){return ce={},Promise.resolve(void 0)}};case"custom":if(this.cache.custom)return this.cache.custom;default:return{get(){return Promise.resolve()},getAll(){return Promise.resolve(void 0)},set(){return Promise.resolve(void 0)},flush(){return Promise.resolve(void 0)}}}}async flushCache(){return await this.cacheProvider().flush(),this.clearCacheVersion(),this}async processInlineAssets(e){if(!this.inlineAssets)return e;const t=o=>{if(!o||typeof o!="object")return o;if(Array.isArray(o))return o.map(s=>t(s));let r={...o};r.fieldtype==="asset"&&Array.isArray(e.data.assets)&&(r={...e.data.assets.find(s=>s.id===r.id),...r});for(const s in r)typeof r[s]=="object"&&(r[s]=t(r[s]));return r};return e.data.story&&(e.data.story.content=t(e.data.story.content)),e.data.stories&&(e.data.stories=e.data.stories.map(o=>(o.content=t(o.content),o))),e}},_n=Rn;const Sn=(e={})=>{const{apiOptions:t}=e;if(!t||!t.accessToken){console.error("You need to provide an access token to interact with Storyblok API. Read https://www.storyblok.com/docs/api/content-delivery#topics/authentication");return}return{storyblokApi:new _n(t)}},In=e=>{if(typeof e!="object"||typeof e._editable>"u")return{};try{const t=JSON.parse(e._editable.replace(/^<!--#storyblok#/,"").replace(/-->$/,""));return t?{"data-blok-c":JSON.stringify(t),"data-blok-uid":`${t.id}-${t.uid}`}:{}}catch{return{}}};let Me="https://app.storyblok.com/f/storyblok-v2-latest.js";const jn=(e,t,o={})=>{var r;const s=!(typeof window>"u")&&typeof window.storyblokRegisterEvent<"u",u=new URL((r=window.location)==null?void 0:r.href).searchParams.get("_storyblok"),p=u!==null&&+u===e;if(!(!s||!p)){if(!e){console.warn("Story ID is not defined. Please provide a valid ID.");return}window.storyblokRegisterEvent(()=>{new window.StoryblokBridge(o).on(["input","published","change"],h=>{var g;h&&(h.action==="input"&&((g=h.story)==null?void 0:g.id)===e?t(h.story):(h.action==="change"||h.action==="published")&&h.storyId===e&&window.location.reload())})})}},Tn=(e={})=>{var t,o;const{bridge:r,accessToken:s,use:u=[],apiOptions:p={},bridgeUrl:h}=e;p.accessToken=p.accessToken||s;const g={bridge:r,apiOptions:p};let f={};u.forEach(n=>{f={...f,...n(g)}}),h&&(Me=h);const d=!(typeof window>"u")&&((o=(t=window.location)==null?void 0:t.search)==null?void 0:o.includes("_storyblok_tk"));return r!==!1&&d&&on(Me),f},He=V({__name:"StoryblokComponent",props:{blok:{}},setup(e,{expose:t}){var o;const r=e,s=P();t({value:s});const u=typeof pe(r.blok.component)!="string",p=Ke("VueSDKOptions"),h=P((o=r.blok.component)==null?void 0:o.replace(/_/g,"-"));return!u&&p&&(p.enableFallbackComponent?(h.value=p.customFallbackComponent??"FallbackComponent",typeof pe(h.value)=="string"&&console.error(`Is the Fallback component "${h.value}" registered properly?`)):console.error(`Component could not be found for blok "${r.blok.component}"! Is it defined in main.ts as "app.component("${r.blok.component}", ${r.blok.component});"?`)),(g,f)=>(U(),je(pe(h.value),Xe({ref_key:"blokRef",ref:s},{...g.$props,...g.$attrs}),Ge({_:2},[Pe(g.$slots,(d,n)=>({name:n,fn:Qe(i=>[Ze(g.$slots,n,et(tt(i)))])}))]),1040))}}),An=e=>{var t;const o=(t=e?.attrs)==null?void 0:t.body;return!Array.isArray(o)||o.length===0?[]:o.map(r=>{var s;return Be(He,{blok:r,id:(s=e?.attrs)==null?void 0:s.id},e.children)})};function Ln(e){const t={renderFn:Be,textFn:nt,keyedResolvers:!0,resolvers:{[j.COMPONENT]:An,...e.resolvers}};return rn(t)}const Cn=V({__name:"StoryblokRichText",props:{doc:{},resolvers:{}},setup(e){const t=e,o=P(),r=()=>o.value;return ke([()=>t.doc,()=>t.resolvers],([s,u])=>{const{render:p}=Ln({resolvers:u??{}});o.value=p(s)},{immediate:!0,deep:!0}),(s,u)=>(U(),je(r))}}),$n={beforeMount(e,t){if(t.value){const o=In(t.value);Object.keys(o).length>0&&(e.setAttribute("data-blok-c",o["data-blok-c"]),e.setAttribute("data-blok-uid",o["data-blok-uid"]),e.classList.add("storyblok__outline"))}}},Nn=e=>{console.error(`You can't use ${e} if you're not loading apiPlugin. Please provide it on StoryblokVue initialization.
    `)};let be=null;const Bn=()=>(be||Nn("useStoryblokApi"),be),On={install(e,t={}){e.directive("editable",$n),e.component("StoryblokComponent",He),e.component("StoryblokRichText",Cn),t.enableFallbackComponent&&!t.customFallbackComponent&&e.component("FallbackComponent",X(()=>Q(()=>import("./FallbackComponent-vpkAikkq-BFaOFGei.js"),__vite__mapDeps([10,1]))));const{storyblokApi:o}=Tn(t);be=o||null,e.provide("VueSDKOptions",t)}},Fe=rt(Vt);Fe.use(On,{accessToken:"your_preview_token_here",use:[Sn],apiOptions:{region:"us"}});Fe.mount("#app");export{G as _,Q as a,jn as i,Bn as m};
