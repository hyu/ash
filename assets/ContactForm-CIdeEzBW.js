import{d as w,r as i,f as E,c as u,b as m,e as a,j as k,h as c,v as f,s as p,x as b,t as N}from"./vue-vendor-CwWIWp0u.js";import{_ as F}from"./index-Bs_cZ0Hf.js";import"./mapbox-gl-CsHXDxne.js";const C={id:"contact",class:"section"},S={class:"text-box text-box-left"},$={class:"form-group"},P=["disabled"],T={class:"form-group"},U=["disabled"],j={class:"form-group"},V=["disabled"],M={class:"form-footer"},R={key:0,class:"form-error"},q=["href"],B={key:1,class:"form-success"},D=["disabled"],I=["href"],Y=w({__name:"ContactForm",setup(O){const t=i({name:"",email:"",note:""}),r=i(!1),n=i("idle"),l=i(""),d=i(!1),h=()=>["ashmartin",".practice","@gmail",".com"].join(""),v=E(()=>{const s=h(),e=encodeURIComponent(`Contact Form: ${t.value.name||"Message"}`),o=encodeURIComponent(`Name: ${t.value.name}
Email: ${t.value.email}

Note:
${t.value.note}`);return`mailto:${s}?subject=${e}&body=${o}`}),y=()=>t.value.name.trim()?t.value.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.value.email)?t.value.note.trim()?t.value.note.length>2e3?(l.value="Note must be 2000 characters or less",!1):!0:(l.value="Please enter a note",!1):(l.value="Please enter a valid email address",!1):(l.value="Please enter your email",!1):(l.value="Please enter your name",!1),g=async()=>{if(n.value="idle",l.value="",d.value=!1,!y()){n.value="error";return}r.value=!0;try{const e=await fetch("/.netlify/functions/sendEmail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t.value)}),o=e.headers.get("content-type");if(!o||!o.includes("application/json")){if(o&&o.includes("text/html"))throw new Error('Netlify Functions are not available. Please run "netlify dev" instead of "npm run dev" to test the form locally.');const x=await e.text();throw new Error(`Server returned an unexpected response: ${x.substring(0,100)}`)}const _=await e.json();if(!e.ok)throw new Error(_.error||"Failed to send message");n.value="success",t.value={name:"",email:"",note:""},setTimeout(()=>{n.value="idle"},5e3)}catch(s){n.value="error";let e=!1;s instanceof TypeError?e=s.message.includes("fetch")||s.message.includes("Failed to fetch"):s instanceof Error&&(e=s.message.includes("Failed to fetch")||s.message.includes("NetworkError")),e?(d.value=!0,l.value="Unable to send message through the form. Please use email instead:"):(l.value=s instanceof Error?s.message:"Failed to send message. Please try again later.",d.value=!1)}finally{r.value=!1}};return(s,e)=>(m(),u("section",C,[a("div",S,[e[8]||(e[8]=a("h3",null,"Contact",-1)),a("form",{onSubmit:k(g,["prevent"]),class:"contact-form"},[a("div",$,[e[3]||(e[3]=a("label",{for:"name"},"Your Name",-1)),c(a("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=o=>t.value.name=o),type:"text",name:"name",required:"",disabled:r.value,class:"form-input"},null,8,P),[[f,t.value.name]])]),a("div",T,[e[4]||(e[4]=a("label",{for:"email"},"Email",-1)),c(a("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=o=>t.value.email=o),type:"email",name:"email",required:"",disabled:r.value,class:"form-input"},null,8,U),[[f,t.value.email]])]),a("div",j,[e[5]||(e[5]=a("label",{for:"note"},"Note",-1)),c(a("textarea",{id:"note","onUpdate:modelValue":e[2]||(e[2]=o=>t.value.note=o),name:"note",rows:"6",required:"",maxlength:"2000",disabled:r.value,class:"form-textarea"},null,8,V),[[f,t.value.note]])]),a("div",M,[n.value==="error"?(m(),u("div",R,[e[6]||(e[6]=b(" Hm, this didn't work. You can try ",-1)),a("a",{href:v.value,class:"email-link"},"email",8,q),e[7]||(e[7]=b(" instead. ",-1))])):p("",!0),n.value==="success"?(m(),u("div",B," Thank you! Your message has been sent successfully. ")):p("",!0),n.value!=="error"?(m(),u("button",{key:2,type:"submit",disabled:r.value,class:"form-submit button"},N(r.value?"Sending...":"Send Message"),9,D)):(m(),u("a",{key:3,href:v.value,class:"form-submit button"}," try email ",8,I))])],32)])]))}}),z=F(Y,[["__scopeId","data-v-0999e935"]]);export{z as default};
